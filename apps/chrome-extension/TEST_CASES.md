# Chrome 扩展集成测试用例

## 测试环境准备

### 前置条件

- ✅ Chrome 浏览器已安装（版本 >= 88）
- ✅ 扩展已构建完成（dist 目录存在）
- ✅ 开发者模式已启用

### 测试数据

- 测试网站: <https://www.google.com>
- 测试网站: <https://github.com>
- 本地测试页面: 可选

---

## 测试用例 1: 扩展安装验证

### 目标

验证扩展能够正确安装到 Chrome 浏览器

### 步骤

1. 打开 `chrome://extensions/`
2. 启用"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 `apps/chrome-extension/dist` 目录
5. 点击"选择"

### 预期结果

- ✅ 扩展出现在扩展列表中
- ✅ 扩展名称显示为 "Midscene.js"
- ✅ 扩展版本显示为 "1.4"
- ✅ 扩展状态为"已启用"
- ✅ 无错误提示

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 2: Playground 模式基础功能

### 目标

验证 Playground 模式的基本自动化功能

### 步骤

1. 打开 <https://www.google.com>
2. 点击浏览器工具栏的 Midscene.js 图标
3. 确认侧边栏打开，默认在 Playground 模式
4. 在输入框中输入以下指令：

   ```
   在搜索框中输入 "Midscene.js"
   ```

5. 点击执行按钮

### 预期结果

- ✅ 侧边栏正常打开
- ✅ Playground 界面显示正常
- ✅ 指令执行成功
- ✅ Google 搜索框中出现 "Midscene.js" 文本
- ✅ 控制台无错误

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 3: Recorder 模式录制功能

### 目标

验证 Recorder 模式能够正确录制用户操作

### 步骤

1. 打开 <https://www.google.com>
2. 打开 Midscene.js 侧边栏
3. 点击菜单图标（三条横线）
4. 选择 "Recorder" 模式
5. 点击"开始录制"按钮
6. 在 Google 页面执行以下操作：
   - 点击搜索框
   - 输入 "test"
   - 按回车键
7. 点击"停止录制"按钮

### 预期结果

- ✅ 成功切换到 Recorder 模式
- ✅ 录制按钮状态正确切换
- ✅ 录制的操作步骤正确显示
- ✅ 包含点击、输入、提交等操作
- ✅ 可以导出录制结果

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 4: Bridge 模式通信功能

### 目标

验证 Bridge 模式的页面通信功能

### 步骤

1. 打开任意网页
2. 打开 Midscene.js 侧边栏
3. 切换到 Bridge 模式
4. 验证 Bridge 界面显示
5. 测试与页面的数据交互

### 预期结果

- ✅ 成功切换到 Bridge 模式
- ✅ Bridge 界面正常显示
- ✅ 能够与页面进行通信
- ✅ 数据传输正常

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 5: AI Test Generator 模式

### 目标

验证 AI 测试生成器功能

### 步骤

1. 打开 Midscene.js 侧边栏
2. 切换到 "AI Test Generator" 模式
3. 验证界面显示
4. 查看模板市场功能

### 预期结果

- ✅ 成功切换到 AI Test Generator 模式
- ✅ 界面正常显示
- ✅ 模板市场可访问
- ✅ 功能按钮可用

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 6: 多标签页支持

### 目标

验证扩展在多个标签页中的工作情况

### 步骤

1. 打开标签页 A: <https://www.google.com>
2. 打开标签页 B: <https://github.com>
3. 在标签页 A 中打开 Midscene.js 侧边栏
4. 切换到标签页 B
5. 在标签页 B 中打开 Midscene.js 侧边栏
6. 在两个标签页间切换，验证状态

### 预期结果

- ✅ 每个标签页都能独立打开侧边栏
- ✅ 标签页间状态互不干扰
- ✅ 切换标签页时扩展工作正常

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 7: 权限验证

### 目标

验证扩展的权限配置正确

### 步骤

1. 在 `chrome://extensions/` 中找到 Midscene.js
2. 点击"详细信息"
3. 查看权限列表

### 预期结果

- ✅ 包含"读取和更改您在所有网站上的数据"权限
- ✅ 包含"管理您的标签页"权限
- ✅ 无不必要的权限请求

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 8: 性能测试

### 目标

验证扩展不会显著影响浏览器性能

### 步骤

1. 打开 Chrome 任务管理器（Shift + Esc）
2. 加载扩展前记录内存使用
3. 加载扩展
4. 打开侧边栏
5. 执行一些自动化操作
6. 观察内存和 CPU 使用情况

### 预期结果

- ✅ 扩展内存占用 < 100MB（空闲状态）
- ✅ CPU 使用率正常（非执行时 < 5%）
- ✅ 无明显的内存泄漏
- ✅ 页面响应速度正常

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 9: 错误处理

### 目标

验证扩展的错误处理机制

### 步骤

1. 打开侧边栏
2. 在 Playground 中输入无效指令
3. 尝试在受限页面（如 chrome://）使用扩展
4. 检查控制台错误信息

### 预期结果

- ✅ 无效指令有友好的错误提示
- ✅ 受限页面有适当的提示
- ✅ 错误不会导致扩展崩溃
- ✅ 错误信息清晰易懂

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试用例 10: 扩展更新

### 目标

验证扩展更新流程

### 步骤

1. 修改代码（如更改一个文本）
2. 运行 `pnpm run build`
3. 在 `chrome://extensions/` 中点击刷新按钮
4. 验证更改是否生效

### 预期结果

- ✅ 构建成功
- ✅ 刷新后更改生效
- ✅ 无需重新加载扩展
- ✅ 用户数据保持不变

### 实际结果

- [ ] 通过
- [ ] 失败（原因：_____________）

---

## 测试总结

### 通过率

- 通过: ___/10
- 失败: ___/10
- 通过率: ___%

### 主要问题

1.
2.
3.

### 建议

1.
2.
3.

### 测试人员

- 姓名: ___________
- 日期: ___________
- Chrome 版本: ___________
- 操作系统: ___________
